{"ast":null,"code":"var _jsxFileName = \"/Users/bytedance/Desktop/workspace/frist_app/src/entry.tsx\";\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport 'rmc-picker/assets/index.css';\nimport '@tetris/douyin_web_components/dist/index.css';\nimport { BrowserRouter } from 'react-router-dom';\nimport Loading from 'components/Loading'; // import via from 'byted-via-aweme';\n\nimport Router from './router'; // import slardar from '@slardar/sdk';\n\nimport { isInApp } from 'utils/env_detect';\nimport { ACTIVITY_PREVIEW, ACTIVITY_SUBMIT } from 'consts'; // import { getPageThemeFormPath } from 'utils';\n// import { initTheme } from '@ies/aweme-color-theme';\n// declare global {\n//   interface Window {\n//     theme: 'dark' | 'light';\n//   }\n// }\n// window.theme = getPageThemeFormPath();\n// initTheme(window.theme);\n// slardar('config', {\n//   bid: 'aweme_coupon',\n// });\n// // 发送pv\n// // @ts-ignore\n// slardar('send', 'pageview');\n// // 本地开发时的basename为/\n// const basename = location.href.indexOf('localhost') !== -1 ? '/' : '/coupon/aweme_v2';\n// via.app\n//   .webviewControl({\n//     type: 'bounces',\n//     args: {\n//       enable: false,\n//     },\n//   } as any)\n//   .catch(e => {\n//     // console.warn(e);\n//   });\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Context = /*#__PURE__*/React.createContext({\n  loading: false,\n  userInfo: undefined,\n  changeValue: (key, value) => {},\n  toggleLoading: loading => {}\n});\n\nif (!isInApp) {\n  // window.close\n  window.addEventListener('unload', () => {\n    window.localStorage.removeItem(ACTIVITY_SUBMIT);\n    window.localStorage.removeItem(ACTIVITY_PREVIEW);\n  });\n}\n\nexport default class Index extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userInfo: undefined,\n      loading: false,\n      entryLocation: undefined,\n      changeValue: (key, value) => {\n        this.setState({\n          [key]: value\n        });\n      },\n      toggleLoading: loading => {\n        this.setState({\n          loading\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      entryLocation: location.pathname\n    });\n  }\n\n  render() {\n    const {\n      loading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Context.Provider, {\n          value: this.state,\n          children: /*#__PURE__*/_jsxDEV(Router, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/_jsxDEV(Loading, {\n          loading: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 34\n        }, this), document.body)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/bytedance/Desktop/workspace/frist_app/src/entry.tsx"],"names":["React","ReactDOM","BrowserRouter","Loading","Router","isInApp","ACTIVITY_PREVIEW","ACTIVITY_SUBMIT","Context","createContext","loading","userInfo","undefined","changeValue","key","value","toggleLoading","window","addEventListener","localStorage","removeItem","Index","Component","state","entryLocation","setState","componentDidMount","location","pathname","render","createPortal","document","body"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAKC,QAAZ,MAA0B,WAA1B;AACA,OAAO,6BAAP;AACA,OAAO,8CAAP;AAEA,SAASC,aAAT,QAA8B,kBAA9B;AACA,OAAOC,OAAP,MAAoB,oBAApB,C,CACA;;AAEA,OAAOC,MAAP,MAAmB,UAAnB,C,CACA;;AAEA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,gBAAT,EAA2BC,eAA3B,QAAkD,QAAlD,C,CACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAEA,OAAO,MAAMC,OAAO,gBAAGR,KAAK,CAACS,aAAN,CAAoB;AACzCC,EAAAA,OAAO,EAAE,KADgC;AAEzCC,EAAAA,QAAQ,EAAEC,SAF+B;AAGzCC,EAAAA,WAAW,EAAE,CAACC,GAAD,EAAcC,KAAd,KAA6B,CAAE,CAHH;AAIzCC,EAAAA,aAAa,EAAGN,OAAD,IAAsB,CAAE;AAJE,CAApB,CAAhB;;AAcP,IAAI,CAACL,OAAL,EAAc;AACZ;AACAY,EAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,MAAM;AACtCD,IAAAA,MAAM,CAACE,YAAP,CAAoBC,UAApB,CAA+Bb,eAA/B;AACAU,IAAAA,MAAM,CAACE,YAAP,CAAoBC,UAApB,CAA+Bd,gBAA/B;AACD,GAHD;AAID;;AAED,eAAe,MAAMe,KAAN,SAAoBrB,KAAK,CAACsB,SAA1B,CAAoC;AAAA;AAAA;AAAA,SACjDC,KADiD,GACjC;AACdZ,MAAAA,QAAQ,EAAEC,SADI;AAEdF,MAAAA,OAAO,EAAE,KAFK;AAGdc,MAAAA,aAAa,EAAEZ,SAHD;AAIdC,MAAAA,WAAW,EAAE,CAACC,GAAD,EAAMC,KAAN,KAAgB;AAC3B,aAAKU,QAAL,CAAc;AAAE,WAACX,GAAD,GAAOC;AAAT,SAAd;AACD,OANa;AAOdC,MAAAA,aAAa,EAAEN,OAAO,IAAI;AACxB,aAAKe,QAAL,CAAc;AAAEf,UAAAA;AAAF,SAAd;AACD;AATa,KADiC;AAAA;;AAajDgB,EAAAA,iBAAiB,GAAS;AACxB,SAAKD,QAAL,CAAc;AAAED,MAAAA,aAAa,EAAEG,QAAQ,CAACC;AAA1B,KAAd;AACD;;AAEDC,EAAAA,MAAM,GAAgB;AACpB,UAAM;AAAEnB,MAAAA;AAAF,QAAc,KAAKa,KAAzB;AACA,wBACE,QAAC,aAAD;AAAA,6BACE;AAAA,gCACE,QAAC,OAAD,CAAS,QAAT;AAAkB,UAAA,KAAK,EAAE,KAAKA,KAA9B;AAAA,iCACE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAIGtB,QAAQ,CAAC6B,YAAT,eAAsB,QAAC,OAAD;AAAS,UAAA,OAAO,EAAEpB;AAAlB;AAAA;AAAA;AAAA;AAAA,gBAAtB,EAAqDqB,QAAQ,CAACC,IAA9D,CAJH;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AAUD;;AA7BgD","sourcesContent":["import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport 'rmc-picker/assets/index.css';\nimport '@tetris/douyin_web_components/dist/index.css';\n\nimport { BrowserRouter } from 'react-router-dom';\nimport Loading from 'components/Loading';\n// import via from 'byted-via-aweme';\n\nimport Router from './router';\n// import slardar from '@slardar/sdk';\n\nimport { isInApp } from 'utils/env_detect';\nimport { ACTIVITY_PREVIEW, ACTIVITY_SUBMIT } from 'consts';\n// import { getPageThemeFormPath } from 'utils';\n// import { initTheme } from '@ies/aweme-color-theme';\n\n// declare global {\n//   interface Window {\n//     theme: 'dark' | 'light';\n//   }\n// }\n// window.theme = getPageThemeFormPath();\n// initTheme(window.theme);\n\n// slardar('config', {\n//   bid: 'aweme_coupon',\n// });\n\n// // 发送pv\n// // @ts-ignore\n// slardar('send', 'pageview');\n\n// // 本地开发时的basename为/\n// const basename = location.href.indexOf('localhost') !== -1 ? '/' : '/coupon/aweme_v2';\n\n// via.app\n//   .webviewControl({\n//     type: 'bounces',\n//     args: {\n//       enable: false,\n//     },\n//   } as any)\n//   .catch(e => {\n//     // console.warn(e);\n//   });\n\nexport const Context = React.createContext({\n  loading: false,\n  userInfo: undefined,\n  changeValue: (key: string, value: any) => {},\n  toggleLoading: (loading: boolean) => {},\n});\nexport interface IState {\n  userInfo: any;\n  loading: boolean;\n  entryLocation: string;\n  changeValue: (key: string, value: any) => void;\n  toggleLoading: (loading: boolean) => void;\n}\n\nif (!isInApp) {\n  // window.close\n  window.addEventListener('unload', () => {\n    window.localStorage.removeItem(ACTIVITY_SUBMIT);\n    window.localStorage.removeItem(ACTIVITY_PREVIEW);\n  });\n}\n\nexport default class Index extends React.Component {\n  state: IState = {\n    userInfo: undefined,\n    loading: false,\n    entryLocation: undefined,\n    changeValue: (key, value) => {\n      this.setState({ [key]: value });\n    },\n    toggleLoading: loading => {\n      this.setState({ loading });\n    },\n  };\n\n  componentDidMount(): void {\n    this.setState({ entryLocation: location.pathname });\n  }\n\n  render(): JSX.Element {\n    const { loading } = this.state;\n    return (\n      <BrowserRouter>\n        <>\n          <Context.Provider value={this.state}>\n            <Router />\n          </Context.Provider>\n          {ReactDOM.createPortal(<Loading loading={loading} />, document.body)}\n        </>\n      </BrowserRouter>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}